var mobiusforms=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./src/scss/bs4.scss":function(e,t,n){},"./src/ts/add-ins/recaptcha.ts":function(e,t,n){"use strict";t.__esModule=!0;var r=n("./src/ts/add-ins/uiActions.ts"),i=function(){function e(){this.helperFunc=new r.UiActions,this.c={recapId:"recapId",clsRecap:"g-recaptcha"}}return e.prototype.init=function(e){var t=e.find(this.c.clsRecap);if(isNaN(e.data(this.c.recapId))){var n=grecaptcha.render(t,{sitekey:t.data("sitekey"),size:"normal"});e.data(this.c.recapId,n)}},e.prototype.check=function(e){var t=e.find("."+this.c.clsRecap);if(0===t.length)return!0;if(1!==t.length)throw"recaptcha not found";return grecaptcha.getResponse()||!1},e}();t.Recaptcha=i},"./src/ts/add-ins/uiActions.ts":function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){}return e.prototype.showOneAlert=function(e,t){e.find(".alert").hide(),""!==t&&e.find("#"+t).show()},e.prototype.disableInputs=function(e,t){e.toggleClass("disable",t),e.find(":input").prop("disabled",t)},e.prototype.attachFieldValidateOnBlur=function(){$(this).data("alreadyRun")||($(this).smkValidate(),$(this).data("alreadyRun",!0))},e}();t.UiActions=r},"./src/ts/collect-fields/auto.ts":function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){}return e.prototype.collect=function(e){var t={Files:[]},n=e.find(":input").not("button").map((function(e,n){return function(e,n){var r=(n=$(n)).attr("name")||n.attr("id");if(!r)return;if(n.attr("type")&&"file"==n.attr("type").toLowerCase()){var i=$.Deferred(),s=n.get(0).files[0];if(!s)return;var a=new FileReader;return a.addEventListener("load",(function(){t.Files.push({Encoded:a.result,Name:s.name,Field:r}),i.resolve()}),!1),a.readAsDataURL(s),i.promise()}n.attr("type")&&"radio"==n.attr("type").toLowerCase()?n.is(":checked")&&(t[r]=n.val()):t[r]=n.val()}(0,n)}));return $.when.apply($,n).then((function(){return t}))},e}();t.CollectFieldsAutomatic=r},"./src/ts/collect-fields/manual.ts":function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){}return e.prototype.collect=function(e){var t={Subject:e.find("#Subject"),Message:e.find("#Message"),SenderName:e.find("#Sendername"),SenderMail:e.find("#Sendermail")};for(var n in t)t.hasOwnProperty(n)&&(t[n]=t[n].val());return t},e}();t.CollectFieldsManual=r},"./src/ts/main.ts":function(e,t,n){"use strict";t.__esModule=!0;var r=n("./src/ts/add-ins/uiActions.ts"),i=n("./src/ts/collect-fields/manual.ts"),s=n("./src/ts/collect-fields/auto.ts"),a=n("./src/ts/add-ins/recaptcha.ts"),c=function(){function e(e){this.helperFunc=new r.UiActions,this.collectFieldsManual=new i.CollectFieldsManual,this.collectFieldsAutomatic=new s.CollectFieldsAutomatic,this.recaptcha=new a.Recaptcha,this.alreadyInit=!1,this.c={clsWrp:"mobius-wrapper",clsForm:"mobius-form"},$("form").attr("novalidate",""),this.moduleWrapper=$(".DnnModule-"+e)}return e.prototype.initialize=function(){var e=this,t=this.moduleWrapper;t.on("blur",":input",this.helperFunc.attachFieldValidateOnBlur),t.each((function(t,n){e.alreadyInit||($(n).find("#sendFormWithApi").on("click",(function(t){return e.send(t)})),e.alreadyInit=!0)}))},e.prototype.send=function(e){var t=this,n=e.currentTarget,r=$2sxc(n),i=this.moduleWrapper,s=i.find("#sendFormWithApi").text();this.helperFunc.showOneAlert(i,"");var a=new CustomEvent("trackMobiusForm",{detail:{category:"mobius-form",action:"submit",label:s}});if(document.dispatchEvent(a),!i.smkValidate())return this.helperFunc.showOneAlert(i,"msgIncomplete");var c=this.recaptcha.check(i);if(!c)return this.helperFunc.showOneAlert(i,"msgRecap");var o=i.find(".mobius-wrapper").hasClass("mobius-mailchimp");this.collectFieldsAutomatic.collect(i).then((function(e){var n=i.find(".mobius-wrapper").data("webservice");e.Recaptcha=c,e.MailChimp=o,t.helperFunc.disableInputs(i,!0),t.helperFunc.showOneAlert(i,"msgSending"),r.webApi.post(n,{},e,!0).success((function(){var e=o?"msgNewsletterSuccess":"msgOk";t.helperFunc.showOneAlert(i,e);var n=new CustomEvent("trackMobiusForm",{detail:{category:"mobius-form",action:"success",label:s}});document.dispatchEvent(n)})).error((function(){var e=o?"msgNewsletterFailed":"msgError";t.helperFunc.showOneAlert(i,e),t.helperFunc.disableInputs(i,!1);var n=new CustomEvent("trackMobiusForm",{detail:{category:"mobius-form",action:"error",label:s}});document.dispatchEvent(n)}))}))},e}();t.App=c},0:function(e,t,n){n("./src/scss/bs4.scss"),e.exports=n("./src/ts/main.ts")}});
//# sourceMappingURL=app-bundle.min.js.map