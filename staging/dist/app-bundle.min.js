var mobiusforms=function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./src/scss/bs4.scss":function(e,t,r){},"./src/ts/add-ins/recaptcha.ts":function(e,t,r){"use strict";t.__esModule=!0;var n=r("./src/ts/add-ins/uiActions.ts"),s=function(){function e(){this.helperFunc=new n.UiActions,this.c={recapId:"recapId",clsRecap:"app-jqfs-recaptcha",clsRecapWrap:"app-recaptcha-wrapper"}}return e.prototype.init=function(e){var t=e.find(this.c.clsRecap);if(isNaN(e.data(this.c.recapId))){var r=grecaptcha.render(t,{sitekey:t.data("sitekey"),size:"normal"});e.data(this.c.recapId,r)}},e.prototype.check=function(e){var t=e.find("."+this.c.clsRecap);if(0===t.length)return!0;if(1!==t.length)throw"recaptcha not found";return grecaptcha.getResponse()||!1},e}();t.Recaptcha=s},"./src/ts/add-ins/uiActions.ts":function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.showOneAlert=function(e,t){e.find(".alert").hide(),""!==t&&e.find("#"+t).show()},e.prototype.disableInputs=function(e,t){e.toggleClass("disable",t),e.find(":input").prop("disabled",t)},e.prototype.attachFieldValidateOnBlur=function(){$(this).data("alreadyRun")||($(this).smkValidate(),$(this).data("alreadyRun",!0))},e}();t.UiActions=n},"./src/ts/collect-fields/auto.ts":function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.collect=function(e){var t={Files:[]},r=e.find(":input").not("button").map((function(e,r){return function(e,r){var n=(r=$(r)).attr("name")||r.attr("id");if(!n)return;if(r.attr("type")&&"file"==r.attr("type").toLowerCase()){var s=$.Deferred(),i=r.get(0).files[0];if(!i)return;var a=new FileReader;return a.addEventListener("load",(function(){t.Files.push({Encoded:a.result,Name:i.name,Field:n}),s.resolve()}),!1),a.readAsDataURL(i),s.promise()}r.attr("type")&&"radio"==r.attr("type").toLowerCase()?r.is(":checked")&&(t[n]=r.val()):t[n]=r.val()}(0,r)}));return $.when.apply($,r).then((function(){return t}))},e}();t.CollectFieldsAutomatic=n},"./src/ts/collect-fields/manual.ts":function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function e(){}return e.prototype.collect=function(e){var t={Subject:e.find("#Subject"),Message:e.find("#Message"),SenderName:e.find("#Sendername"),SenderMail:e.find("#Sendermail")};for(var r in t)t.hasOwnProperty(r)&&(t[r]=t[r].val());return t},e}();t.CollectFieldsManual=n},"./src/ts/main.ts":function(e,t,r){"use strict";t.__esModule=!0;var n=r("./src/ts/add-ins/uiActions.ts"),s=r("./src/ts/collect-fields/manual.ts"),i=r("./src/ts/collect-fields/auto.ts"),a=r("./src/ts/add-ins/recaptcha.ts"),c=function(){function e(e){this.helperFunc=new n.UiActions,this.collectFieldsManual=new s.CollectFieldsManual,this.collectFieldsAutomatic=new i.CollectFieldsAutomatic,this.recaptcha=new a.Recaptcha,this.alreadyInit=!1,this.c={clsWrp:"app-jqfs-wrapper",clsForm:"app-jqfs-form"},$("form").attr("novalidate",""),this.moduleWrapper=$(".DnnModule-"+e)}return e.prototype.initialize=function(){var e=this,t=this.moduleWrapper;t.on("blur",":input",this.helperFunc.attachFieldValidateOnBlur),t.each((function(t,r){e.alreadyInit||($(r).find("#sendFormWithApi").on("click",(function(t){return e.send(t)})),e.alreadyInit=!0)}))},e.prototype.send=function(e){var t=this,r=e.currentTarget,n=$2sxc(r),s=this.moduleWrapper,i=s.find("#sendFormWithApi").text();this.helperFunc.showOneAlert(s,"");var a=new CustomEvent("trackMobiusForm",{detail:{category:"mobius-form",action:"submit",label:i}});if(document.dispatchEvent(a),!s.smkValidate())return this.helperFunc.showOneAlert(s,"msgIncomplete");var c=this.recaptcha.check(s);if(!c)return this.helperFunc.showOneAlert(s,"msgRecap");var o=s.find(".app-jqfs-wrapper").hasClass("app-jqfs-mailchimp-wrapper");this.collectFieldsAutomatic.collect(s).then((function(e){var r=s.find(".app-jqfs-wrapper").data("webservice");e.Recaptcha=c,e.MailChimp=o,t.helperFunc.disableInputs(s,!0),t.helperFunc.showOneAlert(s,"msgSending"),n.webApi.post(r,{},e,!0).success((function(){var e=o?"msgNewsletterSuccess":"msgOk";t.helperFunc.showOneAlert(s,e);var r=new CustomEvent("trackMobiusForm",{detail:{category:"mobius-form",action:"success",label:i}});document.dispatchEvent(r)})).error((function(){var e=o?"msgNewsletterFailed":"msgError";t.helperFunc.showOneAlert(s,e),t.helperFunc.disableInputs(s,!1);var r=new CustomEvent("trackMobiusForm",{detail:{category:"mobius-form",action:"error",label:i}});document.dispatchEvent(r)}))}))},e}();t.App=c},0:function(e,t,r){r("./src/scss/bs4.scss"),e.exports=r("./src/ts/main.ts")}});
//# sourceMappingURL=app-bundle.min.js.map