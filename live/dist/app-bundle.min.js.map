{"version":3,"sources":["webpack://mobiusforms/webpack/bootstrap","webpack://mobiusforms/./src/scss/bs4.scss?5e56","webpack://mobiusforms/./src/ts/main.ts","webpack://mobiusforms/./src/ts/components/helpers.ts","webpack://mobiusforms/./src/ts/components/recaptcha.ts","webpack://mobiusforms/./src/ts/components/mailchimp.ts"],"names":[],"mappings":"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","file":"app-bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// extracted by mini-css-extract-plugin","declare let $2sxc: any;\r\n\r\nimport { Helpers } from './components/helpers';\r\nimport { Recaptcha } from  './components/recaptcha';\r\nimport { MailChimp } from './components/mailchimp';\r\nexport class App {\r\n    helper = new Helpers();\r\n    recaptcha = new Recaptcha();\r\n    mailChimp = new MailChimp();\r\n    moduleWrapper: JQuery;\r\n    alreadyInit = false;\r\n\r\n    c = {\r\n        clsWrp: 'app-jqfs-wrapper',\r\n        clsForm: 'app-jqfs-form',\r\n    };\r\n\r\n    constructor(\r\n        moduleId: number,\r\n    ) {\r\n        // disable validate on the global asp.net form, to not interfere with the contact-form\r\n        $('form').attr('novalidate', '');\r\n        this.moduleWrapper = $(`.DnnModule-${moduleId}`);\r\n    }\r\n\r\n    public initialize() {\r\n        const wrapper = this.moduleWrapper;\r\n        // attach validation to enable as soon as we blur        \r\n        wrapper.on('blur', ':input', this.attachFieldValidateOnBlur );\r\n\r\n        wrapper.each((i, item) => {\r\n            // prevent dupl execution\r\n            if(this.alreadyInit) \r\n                return;\r\n\r\n            const wrap = $(item);\r\n            wrap.find('#sendFormWithApi').on('click', (evt: JQueryEventObject) => this.send(evt) );  // handle click event\r\n            \r\n            this.alreadyInit = true;\r\n        });\r\n\r\n        this.mailChimp.init(wrapper);\r\n    }\r\n\r\n    public send(event: JQueryEventObject) {\r\n        let data = []; \r\n        const btn = event.currentTarget;\r\n        const sxc = $2sxc(btn);\r\n        const wrapper = this.moduleWrapper;\r\n        \r\n        // clear all alerts\r\n        this.helper.showOneAlert(wrapper, '');\r\n        \r\n        // Validate form\r\n        if (!(wrapper as any).smkValidate())\r\n            return this.helper.showOneAlert(wrapper, 'msgIncomplete');\r\n\r\n        // Do Recaptcha test, show alert & fail if required and not complete\r\n        const recap = this.recaptcha.check(wrapper);\r\n        if(!recap) \r\n            return this.helper.showOneAlert(wrapper, 'msgRecap');  \r\n\r\n        // get data \r\n        // data = this.manuallyBuildData(wrapper); // alternative example with manual build, but we prefer automatic\r\n        this.autoCollectData().then((data: any) => {\r\n            const ws = wrapper.find('.app-jqfs-wrapper').data('webservice');   // should be \"Form/ProcessForm\" or a custom override\r\n            data.Recaptcha = recap;\r\n\r\n            // submission\r\n            this.helper.disableInputs(wrapper, true);\r\n            this.helper.showOneAlert(wrapper, 'msgSending'); // show \"sending...\"\r\n\r\n            sxc.webApi.post(ws, {}, data, true)\r\n                .success(() => {\r\n                    this.helper.showOneAlert(wrapper, 'msgOk')\r\n                    $(btn).hide();\r\n                })\r\n                .error(() => {\r\n                    this.helper.showOneAlert(wrapper, 'msgError')\r\n                    this.helper.disableInputs(wrapper, false);\r\n            });\r\n        });\r\n    }\r\n\r\n    // automatically build the send-object with all properties, \r\n    // based on all form-fields which have a item-property=\"\"\r\n    private autoCollectData() {\r\n        const files = this.moduleWrapper.find(':file');\r\n        let data: any = {};\r\n        if(files.length > 0){\r\n            data = {\r\n                Files: []\r\n            };\r\n        }\r\n        \r\n        const fields = this.moduleWrapper.find(':input');\r\n\r\n        function add(i: number, e: any) {\r\n            e = $(e);\r\n            // get the property name from special-attribut, name OR id\r\n            const propName = e.attr('name') || e.attr('id');\r\n            \r\n            if (!propName)\r\n                return;\r\n            \r\n            // extract data from file fields\r\n            if (e.attr('type') && e.attr('type').toLowerCase() == 'file') {\r\n                const deferred = $.Deferred();\r\n                const file = e.get(0).files[0];\r\n                if (!file)\r\n                    return;\r\n                const reader = new FileReader();\r\n\r\n                reader.addEventListener('load', function () {\r\n                    data.Files.push({\r\n                        Encoded: reader.result,\r\n                        Name: file.name,\r\n                        Field: propName\r\n                    });\r\n                    deferred.resolve();\r\n                }, false);\r\n                reader.readAsDataURL(file);\r\n                return deferred.promise();\r\n            } else if (e.attr('type') && e.attr('type').toLowerCase() == 'radio') {\r\n                if (e.is(':checked')){\r\n                    data[propName] = e.val();    \r\n                }\r\n            }\r\n            else { // For all standard fields, set value directly\r\n                data[propName] = e.val();\r\n            }\r\n        }\r\n        const promises = fields.map((i, field) => add(i, field));\r\n\r\n        return $.when.apply($, promises).then(() => {\r\n            return data;\r\n        });\r\n    }\r\n\r\n    private manuallyBuildData(wrapper: JQuery){\r\n        const data: any = {\r\n            Subject: wrapper.find('#Subject'),\r\n            Message: wrapper.find('#Message'),\r\n            SenderName: wrapper.find('#Sendername'),\r\n            SenderMail: wrapper.find('#Sendermail')\r\n        };\r\n\r\n\r\n        for (let prop in data) {\r\n            if (data.hasOwnProperty(prop)) {\r\n                data[prop] = data[prop].val();\r\n            }\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    private attachFieldValidateOnBlur() {\r\n        // skif if validation is already enabled\r\n        if ($(this).data('alreadyRun')) {\r\n            return;\r\n        }\r\n\r\n        // not yet enabled, let's enable and remember...\r\n        ($(this) as any).smkValidate();\r\n        $(this).data('alreadyRun', true);\r\n    }\r\n}\r\n","export class Helpers {\r\n  showOneAlert(wrapper: JQuery, showId: string) {\r\n    wrapper.find('.alert').hide();\r\n    if (showId !== '') {\r\n        wrapper.find('#' + showId).show();\r\n    }\r\n  }\r\n\r\n  disableInputs(wrapper: JQuery, state: boolean) {\r\n    wrapper.toggleClass('disable', state)\r\n    wrapper.find(':input').prop('disabled', state);\r\n  }\r\n}","declare let grecaptcha: any;\r\n\r\nimport { Helpers } from './helpers';\r\n\r\nexport class Recaptcha {\r\n  helper = new Helpers();\r\n\r\n  c  = {\r\n    recapId: \"recapId\",\r\n    clsRecap: \"app-jqfs-recaptcha\",\r\n    clsRecapWrap: \"app-recaptcha-wrapper\"\r\n};\r\n\r\n  constructor() { }\r\n\r\n  init(wrapper: JQuery) {\r\n    const recap = wrapper.find(this.c.clsRecap);\r\n\r\n    if(!isNaN(wrapper.data(this.c.recapId))) {\r\n        return;\r\n    }\r\n\r\n    const id = grecaptcha.render(recap, {\r\n      'sitekey' : recap.data(\"sitekey\"),\r\n      'size' : 'normal'\r\n    });\r\n\r\n    wrapper.data(this.c.recapId, id); // remember for later use       \r\n  }\r\n\r\n  check(wrapper: JQuery) {\r\n    const recap = wrapper.find(\".\" + this.c.clsRecap);\r\n    // if no recaptcha found, probably ok\r\n    if(recap.length === 0) {\r\n      return true;\r\n    }\r\n\r\n    // if many found, probably not ok\r\n    if(recap.length !== 1) {\r\n      throw \"recaptcha not found\";\r\n    }\r\n\r\n    // return google response for the recap\r\n    const res = grecaptcha.getResponse(); // null if failed, something cryptic if ok\r\n\r\n    return res || false; \r\n  }\r\n}","declare let $2sxc: any;\r\n\r\nimport { Helpers } from './helpers';\r\n\r\nexport class MailChimp {\r\n  helper = new Helpers();\r\n\r\n  c = {\r\n    clsWrp: 'app-jqfs-wrapper',\r\n    clsForm: 'app-jqfs-form',\r\n  };\r\n  moduleWrapper: JQuery;\r\n\r\n  constructor() { }\r\n\r\n  init(wrapper: JQuery) {\r\n    this.moduleWrapper = wrapper;\r\n    wrapper.find('#subToMc').on('click', (evt) => this.send(evt) );  // handle click event\r\n  }\r\n\r\n  send(event: any) {\r\n    const wrapper = this.moduleWrapper;\r\n    const ws = wrapper.find('.app-jqfs-wrapper').data('webservice');\r\n    const btn = event.currentTarget;\r\n    const sxc = $2sxc(btn);\r\n  \r\n    // Validate form\r\n    if (!(wrapper as any).smkValidate())\r\n      return this.helper.showOneAlert(wrapper, 'msgIncomplete');\r\n    \r\n    const data = {\r\n      SenderMail: wrapper.find('.sender-mail').val(),\r\n      SenderName: wrapper.find('.sender-name').val(),\r\n      SenderLastName: wrapper.find('.sender-surname').val(),\r\n      MailChimp: true\r\n    }\r\n    \r\n    sxc.webApi.post(ws, {}, data, true)\r\n      .success(() => {\r\n        this.moduleWrapper.find('.app-jqfs-form-mailchimp').fadeOut();\r\n        this.moduleWrapper.find('#NewsletterSuccessMsg').fadeIn();\r\n      })\r\n      .error(() => {\r\n        this.moduleWrapper.find('.app-jqfs-form-mailchimp').fadeOut();\r\n        this.moduleWrapper.find('#NewsletterFailedMsg').fadeIn();\r\n      })\r\n  }\r\n}"],"sourceRoot":""}